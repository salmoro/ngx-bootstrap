{"version":3,"file":"ngx-bootstrap-rating.mjs","sources":["../../../../src/rating/rating.config.ts","../../../../src/rating/rating.component.html","../../../../src/rating/rating.component.ts","../../../../src/rating/rating.module.ts","../../../../src/rating/ngx-bootstrap-rating.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n/** Default values provider for rating */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RatingConfig {\r\n  /** aria label for rating */\r\n  ariaLabel = 'rating';\r\n}\r\n","<span (mouseleave)=\"reset()\" (keydown)=\"onKeydown($event)\" tabindex=\"0\"\r\n      role=\"slider\" aria-valuemin=\"0\"\r\n      [attr.aria-label]=\"ariaLabel\"\r\n      [attr.aria-valuemax]=\"range.length\"\r\n      [attr.aria-valuenow]=\"value\">\r\n  <ng-template #star let-value=\"value\" let-index=\"index\">{{ index < value ? '&#9733;' : '&#9734;' }}</ng-template>\r\n  <ng-template ngFor let-r [ngForOf]=\"range\" let-index=\"index\">\r\n    <span class=\"sr-only visually-hidden\">({{ index < value ? '*' : ' ' }})</span>\r\n    <span class=\"bs-rating-star\"\r\n          (mouseenter)=\"enter(index + 1)\"\r\n          (click)=\"rate(index + 1)\"\r\n          [title]=\"r.title\"\r\n          [style.cursor]=\"readonly ? 'default' : 'pointer'\"\r\n          [class.active]=\"index < value\">\r\n      <ng-template [ngTemplateOutlet]=\"customTemplate || star\"\r\n                   [ngTemplateOutletContext]=\"{index: index, value: value}\">\r\n      </ng-template>\r\n    </span>\r\n  </ng-template>\r\n</span>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  EventEmitter,\r\n  forwardRef,\r\n  HostListener,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  Provider,\r\n  TemplateRef\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { RatingResults } from './models';\r\nimport { RatingConfig } from './rating.config';\r\n\r\nexport const RATING_CONTROL_VALUE_ACCESSOR: Provider = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => RatingComponent),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n  selector: 'rating',\r\n  templateUrl: './rating.component.html',\r\n  providers: [RATING_CONTROL_VALUE_ACCESSOR],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class RatingComponent implements ControlValueAccessor, OnInit {\r\n  /** number of icons */\r\n  @Input() max = 5;\r\n  /** if true will not react on any user events */\r\n  @Input() readonly = false;\r\n  /** array of icons titles, default: ([\"one\", \"two\", \"three\", \"four\", \"five\"]) */\r\n  @Input() titles: string[] = [];\r\n  /** custom template for icons */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  @Input() customTemplate?: TemplateRef<any>;\r\n  /** fired when icon selected, $event:number equals to selected rating */\r\n  @Output() onHover = new EventEmitter<number>();\r\n  /** fired when icon selected, $event:number equals to previous rating value */\r\n  @Output() onLeave = new EventEmitter<number>();\r\n\r\n  onChange = Function.prototype;\r\n  onTouched = Function.prototype;\r\n  /** aria label for rating */\r\n  ariaLabel = 'rating';\r\n  range: RatingResults[] = [];\r\n  value = 0;\r\n  protected preValue?: number;\r\n\r\n  constructor(private changeDetection: ChangeDetectorRef, config: RatingConfig) {\r\n    Object.assign(this, config);\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeydown(event: KeyboardEvent): void {\r\n    if ([37, 38, 39, 40].indexOf(event.which) === -1) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const sign = event.which === 38 || event.which === 39 ? 1 : -1;\r\n    this.rate(this.value + sign);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.max = this.max || 5;\r\n    this.titles =\r\n      typeof this.titles !== 'undefined' && this.titles.length > 0\r\n        ? this.titles\r\n        : [];\r\n    this.range = this.buildTemplateObjects(this.max);\r\n  }\r\n\r\n  // model -> view\r\n  writeValue(value: number): void {\r\n    if (value % 1 !== value) {\r\n      this.value = Math.round(value);\r\n      this.preValue = value;\r\n      this.changeDetection.markForCheck();\r\n\r\n      return;\r\n    }\r\n\r\n    this.preValue = value;\r\n    this.value = value;\r\n    this.changeDetection.markForCheck();\r\n  }\r\n\r\n  enter(value: number): void {\r\n    if (!this.readonly) {\r\n      this.value = value;\r\n      this.changeDetection.markForCheck();\r\n      this.onHover.emit(value);\r\n    }\r\n  }\r\n\r\n  reset(): void {\r\n    if (typeof this.preValue === 'number') {\r\n      this.value = Math.round(this.preValue);\r\n      this.changeDetection.markForCheck();\r\n      this.onLeave.emit(this.value);\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: (_: number) => void): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: () => void): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  rate(value: number): void {\r\n    if (!this.readonly && this.range\r\n      && value >= 0 && value <= this.range.length) {\r\n      this.writeValue(value);\r\n      this.onChange(value);\r\n    }\r\n  }\r\n\r\n  protected buildTemplateObjects(max: number): RatingResults[] {\r\n    const result: RatingResults[] = [];\r\n\r\n    for (let i = 0; i < max; i++) {\r\n      result.push({\r\n        index: i,\r\n        title: this.titles[i] || i + 1\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { RatingComponent } from './rating.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [RatingComponent],\r\n  exports: [RatingComponent]\r\n})\r\nexport class RatingModule {\r\n  static forRoot(): ModuleWithProviders<RatingModule> {\r\n    return {\r\n      ngModule: RatingModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}