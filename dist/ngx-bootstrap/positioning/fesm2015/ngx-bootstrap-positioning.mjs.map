{"version":3,"file":"ngx-bootstrap-positioning.mjs","sources":["../../../../src/positioning/models/index.ts","../../../../src/positioning/utils/getStyleComputedProperty.ts","../../../../src/positioning/utils/getOffsetParent.ts","../../../../src/positioning/utils/isOffsetContainer.ts","../../../../src/positioning/utils/getRoot.ts","../../../../src/positioning/utils/findCommonOffsetParent.ts","../../../../src/positioning/utils/getFixedPositionOffsetParent.ts","../../../../src/positioning/utils/getBordersSize.ts","../../../../src/positioning/utils/getWindowSizes.ts","../../../../src/positioning/utils/getClientRect.ts","../../../../src/positioning/utils/isNumeric.ts","../../../../src/positioning/utils/getBoundingClientRect.ts","../../../../src/positioning/utils/getParentNode.ts","../../../../src/positioning/utils/getScrollParent.ts","../../../../src/positioning/utils/getOffsetRectRelativeToArbitraryNode.ts","../../../../src/positioning/utils/getScroll.ts","../../../../src/positioning/utils/getViewportOffsetRectRelativeToArtbitraryNode.ts","../../../../src/positioning/utils/isFixed.ts","../../../../src/positioning/utils/getBoundaries.ts","../../../../src/positioning/utils/computeAutoPlacement.ts","../../../../src/positioning/utils/getOffsets.ts","../../../../src/positioning/utils/getOppositePlacement.ts","../../../../src/positioning/utils/getOppositeVariation.ts","../../../../src/positioning/utils/getOuterSizes.ts","../../../../src/positioning/utils/getReferenceOffsets.ts","../../../../src/positioning/utils/getTargetOffsets.ts","../../../../src/positioning/utils/isModifierEnabled.ts","../../../../src/positioning/utils/checkMargin.ts","../../../../src/positioning/utils/updateContainerClass.ts","../../../../src/positioning/utils/setStyles.ts","../../../../src/positioning/modifiers/arrow.ts","../../../../src/positioning/modifiers/flip.ts","../../../../src/positioning/modifiers/initData.ts","../../../../src/positioning/modifiers/preventOverflow.ts","../../../../src/positioning/modifiers/shift.ts","../../../../src/positioning/ng-positioning.ts","../../../../src/positioning/positioning.service.ts","../../../../src/positioning/ngx-bootstrap-positioning.ts"],"sourcesContent":["export interface Offsets {\r\n  width: number;\r\n  height: number;\r\n  bottom?: number;\r\n  left?: number;\r\n  right?: number;\r\n  top?: number;\r\n  marginTop?: number;\r\n  marginLeft?: number;\r\n}\r\n\r\nexport interface Data {\r\n  options: Options;\r\n  instance: {\r\n    target: HTMLElement;\r\n    host: HTMLElement;\r\n    arrow?: HTMLElement;\r\n  };\r\n  offsets: {\r\n    target: Offsets;\r\n    host: Offsets;\r\n    arrow?: Record<string, string | number | HTMLElement>;\r\n  };\r\n  positionFixed: boolean;\r\n  placement: string;\r\n  placementAuto: boolean;\r\n}\r\n\r\nexport interface Options {\r\n  placement?: string;\r\n  modifiers: {\r\n    flip?: {\r\n      enabled: boolean;\r\n    };\r\n    preventOverflow?: {\r\n      enabled: boolean;\r\n      boundariesElement?: string;\r\n    };\r\n  };\r\n  allowedPositions?: string[];\r\n}\r\n\r\nexport enum MapPlacementInToRL {\r\n  top = 'top',\r\n  bottom = 'bottom',\r\n  left = 'left',\r\n  right = 'right',\r\n  auto = 'auto',\r\n  end = 'right',\r\n  start = 'left',\r\n  'top left' = 'top left',\r\n  'top right' = 'top right',\r\n  'right top' = 'right top',\r\n  'right bottom' = 'right bottom',\r\n  'bottom right' = 'bottom right',\r\n  'bottom left' = 'bottom left',\r\n  'left bottom' = 'left bottom',\r\n  'left top' = 'left top',\r\n  'top start' = 'top left',\r\n  'top end' = 'top right',\r\n  'end top' = 'right top',\r\n  'end bottom' = 'right bottom',\r\n  'bottom end' = 'bottom right',\r\n  'bottom start' = 'bottom left',\r\n  'start bottom' = 'start bottom',\r\n  'start top' = 'left top',\r\n}\r\n\r\nexport enum PlacementForBs5 {\r\n  top = 'top',\r\n  bottom = 'bottom',\r\n  left = 'start',\r\n  right = 'end',\r\n  auto = 'auto',\r\n  end = 'end',\r\n  start = 'start',\r\n  'top left' = 'top start',\r\n  'top right' = 'top end',\r\n  'right top' = 'end top',\r\n  'right bottom' = 'end bottom',\r\n  'bottom right' = 'bottom end',\r\n  'bottom left' = 'bottom start',\r\n  'left bottom' = 'start bottom',\r\n  'left top' = 'start top',\r\n  'top start' = 'top start',\r\n  'top end' = 'top end',\r\n  'end top' = 'end top',\r\n  'end bottom' = 'end bottom',\r\n  'bottom end' = 'bottom end',\r\n  'bottom start' = 'bottom start',\r\n  'start bottom' = 'start bottom',\r\n  'start top' = 'start top',\r\n}\r\n\r\nexport type AvailbleBSPositions = 'top' | 'bottom' | 'left' | 'right' | 'auto' | 'top left' | 'top right' | 'right top' | 'right bottom' | 'bottom right' | 'bottom left' | 'left bottom' | 'left top' | 'start' | 'end' | 'top start' | 'top end' | 'end top' | 'end bottom' | 'bottom end' | 'bottom start' | 'start bottom' | 'start top';\r\n\r\n","/**\r\n * Get CSS computed property of the given element\r\n */\r\nexport function getStyleComputedProperty(element: Element): CSSStyleDeclaration;\r\nexport function getStyleComputedProperty(element: Element, property?: string): string | string[];\r\nexport function getStyleComputedProperty(element: Element, property?: string): string | string[] | CSSStyleDeclaration {\r\n  if (element.nodeType !== 1) {\r\n    return [];\r\n  }\r\n  // NOTE: 1 DOM access here\r\n  const window = element.ownerDocument.defaultView;\r\n  const css = window?.getComputedStyle(element, null);\r\n\r\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n  // @ts-ignore\r\n  return property ? css && css[property] : css;\r\n}\r\n","/**\r\n * Returns the offset parent of the given element\r\n */\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\n\r\nexport function getOffsetParent(element: HTMLElement): HTMLElement {\r\n  if (!element) {\r\n    return document.documentElement;\r\n  }\r\n\r\n  const noOffsetParent = null;\r\n\r\n  // NOTE: 1 DOM access here\r\n  let offsetParent = element?.offsetParent;\r\n\r\n  // Skip hidden elements which don't have an offsetParent\r\n  let sibling: HTMLElement | undefined = void 0;\r\n\r\n  while (offsetParent === noOffsetParent\r\n         && element.nextElementSibling\r\n         && sibling !== element.nextElementSibling) {\r\n\r\n      // todo: valorkin fix\r\n      sibling = element.nextElementSibling as HTMLElement;\r\n      offsetParent = sibling.offsetParent;\r\n    }\r\n\r\n  const nodeName = offsetParent && offsetParent.nodeName;\r\n\r\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\r\n    return sibling ? sibling.ownerDocument.documentElement : document.documentElement;\r\n  }\r\n\r\n  // .offsetParent will return the closest TH, TD or TABLE in case\r\n  if (\r\n    offsetParent &&\r\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\r\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\r\n  ) {\r\n    return getOffsetParent(offsetParent as HTMLElement);\r\n  }\r\n\r\n  return offsetParent as HTMLElement;\r\n}\r\n","import { getOffsetParent } from './getOffsetParent';\r\n\r\n// todo: valorkin fix\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function isOffsetContainer(element: any) {\r\n  const { nodeName } = element;\r\n  if (nodeName === 'BODY') {\r\n    return false;\r\n  }\r\n\r\n  return (\r\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\r\n  );\r\n}\r\n","/**\r\n * Finds the root node (document, shadowDOM root) of the given element\r\n */\r\nexport function getRoot(node: Node|ShadowRoot): Node|ShadowRoot {\r\n  if (node.parentNode !== null) {\r\n    return getRoot(node.parentNode);\r\n  }\r\n\r\n  return node;\r\n}\r\n","/**\r\n * Finds the offset parent common to the two provided nodes\r\n */\r\nimport { isOffsetContainer } from './isOffsetContainer';\r\nimport { getRoot } from './getRoot';\r\nimport { getOffsetParent } from './getOffsetParent';\r\n\r\nexport function findCommonOffsetParent(element1: HTMLElement, element2: HTMLElement): HTMLElement {\r\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\r\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\r\n    return document.documentElement;\r\n  }\r\n\r\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\r\n    const order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\r\n\r\n  const start = order ? element1 : element2;\r\n  const end = order ? element2 : element1;\r\n\r\n  // Get common ancestor container\r\n  const range = document.createRange();\r\n  range.setStart(start, 0);\r\n  range.setEnd(end, 0);\r\n\r\n  // todo: valorkin fix\r\n  const commonAncestorContainer = range.commonAncestorContainer as unknown as HTMLElement;\r\n\r\n  // Both nodes are inside #document\r\n  if (\r\n    (element1 !== commonAncestorContainer &&\r\n      element2 !== commonAncestorContainer) ||\r\n    start.contains(end)\r\n  ) {\r\n    if (isOffsetContainer(commonAncestorContainer)) {\r\n      return commonAncestorContainer;\r\n    }\r\n\r\n    return getOffsetParent(commonAncestorContainer);\r\n  }\r\n\r\n  // one of the nodes is inside shadowDOM, find which one\r\n  const element1root = getRoot(element1) as ShadowRoot;\r\n  if (element1root.host) {\r\n    return findCommonOffsetParent(element1root.host as HTMLElement, element2);\r\n  } else {\r\n    return findCommonOffsetParent(element1, (getRoot(element2) as ShadowRoot).host as HTMLElement);\r\n  }\r\n}\r\n","/**\r\n * Finds the first parent of an element that has a transformed property defined\r\n */\r\n\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\n\r\nexport function getFixedPositionOffsetParent(element: HTMLElement): HTMLElement {\r\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\r\n  if (!element || !element.parentElement) {\r\n   return document.documentElement;\r\n  }\r\n\r\n  let el = element.parentElement;\r\n\r\n  while (el?.parentElement && getStyleComputedProperty(el, 'transform') === 'none') {\r\n    el = el.parentElement;\r\n  }\r\n\r\n  return el || document.documentElement;\r\n}\r\n","/**\r\n * Helper to detect borders of a given element\r\n */\r\n\r\nexport function getBordersSize(styles: CSSStyleDeclaration, axis: string): number {\r\n  const sideA = axis === 'x' ? 'Left' : 'Top';\r\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\r\n\r\n  return (\r\n    parseFloat((styles as never)[`border${sideA}Width`]) +\r\n    parseFloat((styles as never)[`border${sideB}Width`])\r\n  );\r\n}\r\n","function getSize(axis: string, body: HTMLElement, html: HTMLElement, computedStyle?: CSSStyleDeclaration) {\r\n  const _body = body as unknown as Record<string, number>;\r\n  const _html = html as never;\r\n  const _computedStyle = computedStyle as unknown as Record<string, string>;\r\n\r\n  return Math.max(\r\n    _body[`offset${axis}`],\r\n    _body[`scroll${axis}`],\r\n    _html[`client${axis}`],\r\n    _html[`offset${axis}`],\r\n    _html[`scroll${axis}`],\r\n    0\r\n  );\r\n}\r\n\r\nexport function getWindowSizes(document: Document) {\r\n  const body = document.body;\r\n  const html = document.documentElement;\r\n  const computedStyle = void 0;\r\n\r\n  return {\r\n    height: getSize('Height', body, html, computedStyle),\r\n    width: getSize('Width', body, html, computedStyle)\r\n  };\r\n}\r\n","/**\r\n * Given element offsets, generate an output similar to getBoundingClientRect\r\n */\r\nimport { Offsets } from '../models';\r\n\r\nexport function getClientRect(offsets: Offsets): Offsets {\r\n  return {\r\n    ...offsets,\r\n    right: (offsets.left || 0) + offsets.width,\r\n    bottom: (offsets.top || 0) + offsets.height\r\n  };\r\n}\r\n","/**\r\n * Tells if a given input is a number\r\n */\r\nexport function isNumeric(n: string): boolean {\r\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(Number(n));\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function isNumber(value?: any): value is number {\r\n  return typeof value === 'number' || Object.prototype.toString.call(value) === '[object Number]';\r\n}\r\n","/**\r\n * Get bounding client rect of given element\r\n */\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\nimport { getBordersSize } from './getBordersSize';\r\nimport { getWindowSizes } from './getWindowSizes';\r\nimport { getClientRect } from './getClientRect';\r\nimport { Offsets } from '../models';\r\nimport { isNumber } from './isNumeric';\r\n\r\nexport function getBoundingClientRect(element: HTMLElement): Offsets {\r\n  const rect: Offsets = element.getBoundingClientRect();\r\n\r\n  // IE10 10 FIX: Please, don't ask, the element isn't\r\n  // considered in DOM in some circumstances...\r\n  // This isn't reproducible in IE10 compatibility mode of IE11\r\n  // try {\r\n  //   if (isIE(10)) {\r\n  //     const scrollTop = getScroll(element, 'top');\r\n  //     const scrollLeft = getScroll(element, 'left');\r\n  //     if (rect && isNumber(rect.top) && isNumber(rect.left) && isNumber(rect.bottom) && isNumber(rect.right)) {\r\n  //       rect.top += scrollTop;\r\n  //       rect.left += scrollLeft;\r\n  //       rect.bottom += scrollTop;\r\n  //       rect.right += scrollLeft;\r\n  //     }\r\n  //   }\r\n  // } catch (e) {\r\n  //   return rect;\r\n  // }\r\n\r\n  if (!(rect && isNumber(rect.top) && isNumber(rect.left) && isNumber(rect.bottom) && isNumber(rect.right))) {\r\n    return rect;\r\n  }\r\n\r\n  const result: Offsets = {\r\n    left: rect.left,\r\n    top: rect.top,\r\n    width: rect.right - rect.left,\r\n    height: rect.bottom - rect.top\r\n  };\r\n\r\n  // subtract scrollbar size from sizes\r\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : undefined;\r\n  const width = sizes?.width || element.clientWidth\r\n    || isNumber(rect.right) && isNumber(result.left) && rect.right - result.left || 0;\r\n  const height = sizes?.height || element.clientHeight\r\n    || isNumber(rect.bottom) && isNumber(result.top) && rect.bottom - result.top || 0;\r\n\r\n  let horizScrollbar = element.offsetWidth - width;\r\n  let vertScrollbar = element.offsetHeight - height;\r\n\r\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\r\n  // we make this check conditional for performance reasons\r\n  if (horizScrollbar || vertScrollbar) {\r\n    const styles = getStyleComputedProperty(element);\r\n    horizScrollbar -= getBordersSize(styles, 'x');\r\n    vertScrollbar -= getBordersSize(styles, 'y');\r\n\r\n    result.width -= horizScrollbar;\r\n    result.height -= vertScrollbar;\r\n  }\r\n\r\n  return getClientRect(result);\r\n}\r\n","/**\r\n * Returns the parentNode or the host of the element\r\n */\r\n// todo: valorkin fix\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function getParentNode(element: any): any {\r\n  if (element.nodeName === 'HTML') {\r\n    return element;\r\n  }\r\n\r\n  return element.parentNode || element.host;\r\n}\r\n","/**\r\n * Returns the scrolling parent of the given element\r\n */\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\nimport { getParentNode } from './getParentNode';\r\n\r\n// todo: valorkin fix\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function getScrollParent(element: any): any {\r\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\r\n  if (!element) {\r\n    return document.body;\r\n  }\r\n\r\n  switch (element.nodeName) {\r\n    case 'HTML':\r\n    case 'BODY':\r\n      return element.ownerDocument.body;\r\n    case '#document':\r\n      return element.body;\r\n    default:\r\n  }\r\n\r\n  // Firefox want us to check `-x` and `-y` variations as well\r\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\r\n  if (/(auto|scroll|overlay)/.test(String(overflow) + String(overflowY) + String(overflowX))) {\r\n    return element;\r\n  }\r\n\r\n  return getScrollParent(getParentNode(element));\r\n}\r\n","import { getBoundingClientRect } from './getBoundingClientRect';\r\nimport { getClientRect } from './getClientRect';\r\nimport { getScrollParent } from './getScrollParent';\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\nimport { includeScroll } from './includeScroll';\r\nimport { Offsets } from '../models';\r\nimport { isNumber } from './isNumeric';\r\n\r\nexport function getOffsetRectRelativeToArbitraryNode(\r\n  children: HTMLElement,\r\n  parent: HTMLElement,\r\n  fixedPosition = false\r\n): Offsets {\r\n  const isHTML = parent.nodeName === 'HTML';\r\n  const childrenRect = getBoundingClientRect(children);\r\n  const parentRect = getBoundingClientRect(parent);\r\n  const scrollParent = getScrollParent(children);\r\n\r\n  const styles = getStyleComputedProperty(parent);\r\n  const borderTopWidth = parseFloat(styles.borderTopWidth);\r\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth);\r\n\r\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\r\n  if (fixedPosition && isHTML) {\r\n    parentRect.top = Math.max(parentRect.top ?? 0, 0);\r\n    parentRect.left = Math.max(parentRect.left ?? 0, 0);\r\n  }\r\n\r\n  const offsets: Offsets = getClientRect({\r\n    top: (childrenRect.top ?? 0) - (parentRect.top ?? 0) - borderTopWidth,\r\n    left: (childrenRect.left ?? 0) - (parentRect.left ?? 0) - borderLeftWidth,\r\n    width: childrenRect.width,\r\n    height: childrenRect.height\r\n  });\r\n\r\n  offsets.marginTop = 0;\r\n  offsets.marginLeft = 0;\r\n\r\n  // Subtract margins of documentElement in case it's being used as parent\r\n  // we do this only on HTML because it's the only element that behaves\r\n  // differently when margins are applied to it. The margins are included in\r\n  // the box of the documentElement, in the other cases not.\r\n  if (isHTML) {\r\n    const marginTop = parseFloat(styles.marginTop);\r\n    const marginLeft = parseFloat(styles.marginLeft);\r\n\r\n    if (isNumber(offsets.top)) {\r\n      offsets.top -= borderTopWidth - marginTop;\r\n    }\r\n    if (isNumber(offsets.bottom)) {\r\n      offsets.bottom -= borderTopWidth - marginTop;\r\n    }\r\n    if (isNumber(offsets.left)) {\r\n      offsets.left -= borderLeftWidth - marginLeft;\r\n    }\r\n    if (isNumber(offsets.right)) {\r\n      offsets.right -= borderLeftWidth - marginLeft;\r\n    }\r\n\r\n    // Attach marginTop and marginLeft because in some circumstances we may need them\r\n    offsets.marginTop = marginTop;\r\n    offsets.marginLeft = marginLeft;\r\n  }\r\n\r\n  return offsets;\r\n}\r\n","/**\r\n * Gets the scroll value of the given element in the given side (top and left)\r\n */\r\nexport function getScroll(element: HTMLElement, side = 'top') {\r\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\r\n  const nodeName = element.nodeName;\r\n\r\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\r\n    const html = element.ownerDocument.documentElement;\r\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\r\n\r\n    return scrollingElement[upperSide];\r\n  }\r\n\r\n  return element[upperSide];\r\n}\r\n","import { getClientRect } from './getClientRect';\r\nimport { getOffsetRectRelativeToArbitraryNode } from './getOffsetRectRelativeToArbitraryNode';\r\nimport { getScroll } from './getScroll';\r\nimport { Offsets } from '../models';\r\n\r\nexport function getViewportOffsetRectRelativeToArtbitraryNode(element: HTMLElement, excludeScroll = false): Offsets {\r\n  const html = element.ownerDocument.documentElement;\r\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\r\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\r\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\r\n\r\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\r\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\r\n\r\n  const offset = {\r\n    top: scrollTop - Number(relativeOffset?.top) + Number(relativeOffset?.marginTop),\r\n    left: scrollLeft - Number(relativeOffset?.left) + Number(relativeOffset?.marginLeft),\r\n    width,\r\n    height\r\n  };\r\n\r\n  return getClientRect(offset);\r\n}\r\n","/**\r\n * Check if the given element is fixed or is inside a fixed parent\r\n */\r\nimport { getStyleComputedProperty } from './getStyleComputedProperty';\r\nimport { getParentNode } from './getParentNode';\r\n\r\nexport function isFixed(element: HTMLElement): boolean {\r\n  const nodeName = element.nodeName;\r\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\r\n    return false;\r\n  }\r\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\r\n    return true;\r\n  }\r\n\r\n  return isFixed(getParentNode(element));\r\n}\r\n","/**\r\n * Computed the boundaries limits and return them\r\n */\r\nimport { Offsets } from '../models';\r\nimport { findCommonOffsetParent } from './findCommonOffsetParent';\r\nimport { getFixedPositionOffsetParent } from './getFixedPositionOffsetParent';\r\nimport { getOffsetRectRelativeToArbitraryNode } from './getOffsetRectRelativeToArbitraryNode';\r\nimport { getParentNode } from './getParentNode';\r\nimport { getScrollParent } from './getScrollParent';\r\nimport { getViewportOffsetRectRelativeToArtbitraryNode } from './getViewportOffsetRectRelativeToArtbitraryNode';\r\nimport { getWindowSizes } from './getWindowSizes';\r\nimport { isFixed } from './isFixed';\r\nimport { isNumber } from './isNumeric';\r\n\r\nexport function getBoundaries(\r\n  target: HTMLElement,\r\n  host: HTMLElement,\r\n  padding = 0,\r\n  boundariesElement: string,\r\n  fixedPosition = false\r\n): Partial<Offsets> {\r\n  // NOTE: 1 DOM access here\r\n\r\n  let boundaries: Partial<Offsets> = { top: 0, left: 0 };\r\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(target) : findCommonOffsetParent(target, host);\r\n\r\n  // Handle viewport case\r\n  if (boundariesElement === 'viewport') {\r\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\r\n  } else {\r\n    // Handle other cases based on DOM element used as boundaries\r\n    let boundariesNode;\r\n    if (boundariesElement === 'scrollParent') {\r\n      boundariesNode = getScrollParent(getParentNode(host));\r\n      if (boundariesNode.nodeName === 'BODY') {\r\n        boundariesNode = target.ownerDocument.documentElement;\r\n      }\r\n    } else if (boundariesElement === 'window') {\r\n      boundariesNode = target.ownerDocument.documentElement;\r\n    } else {\r\n      boundariesNode = boundariesElement;\r\n    }\r\n\r\n    const offsets = getOffsetRectRelativeToArbitraryNode(\r\n      boundariesNode,\r\n      offsetParent,\r\n      fixedPosition\r\n    );\r\n\r\n    // In case of HTML, we need a different computation\r\n    if (offsets && boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\r\n      const { height, width } = getWindowSizes(target.ownerDocument);\r\n      if (isNumber(boundaries.top) && isNumber(offsets.top) && isNumber(offsets.marginTop)) {\r\n        boundaries.top += offsets.top - offsets.marginTop;\r\n      }\r\n      if (isNumber(boundaries.top)) {\r\n        boundaries.bottom = Number(height) + Number(offsets.top);\r\n      }\r\n      if (isNumber(boundaries.left) && isNumber(offsets.left) && isNumber(offsets.marginLeft)) {\r\n        boundaries.left += offsets.left - offsets.marginLeft;\r\n      }\r\n      if (isNumber(boundaries.top)) {\r\n        boundaries.right = Number(width) + Number(offsets.left);\r\n      }\r\n    } else if (offsets) {\r\n      // for all the other DOM elements, this one is good\r\n      boundaries = offsets;\r\n    }\r\n  }\r\n\r\n  // Add paddings\r\n  if (isNumber(boundaries.left)) {\r\n    boundaries.left += padding;\r\n  }\r\n  if (isNumber(boundaries.top)) {\r\n    boundaries.top += padding;\r\n  }\r\n  if (isNumber(boundaries.right)) {\r\n    boundaries.right -= padding;\r\n  }\r\n  if (isNumber(boundaries.bottom)) {\r\n    boundaries.bottom -= padding;\r\n  }\r\n\r\n  return boundaries;\r\n}\r\n","/**\r\n * Utility used to transform the `auto` placement to the placement with more\r\n * available space.\r\n */\r\nimport { getBoundaries } from './getBoundaries';\r\nimport { Offsets, PlacementForBs5 } from '../models';\r\nimport { getBsVer } from 'ngx-bootstrap/utils';\r\n\r\nfunction getArea({ width, height }: { width: number; height: number }) {\r\n  return width * height;\r\n}\r\n\r\nexport function computeAutoPlacement(\r\n  placement: string,\r\n  refRect: Offsets,\r\n  target: HTMLElement,\r\n  host: HTMLElement,\r\n  allowedPositions = ['top', 'bottom', 'right', 'left'],\r\n  boundariesElement = 'viewport',\r\n  padding = 0\r\n) {\r\n  if (placement.indexOf('auto') === -1) {\r\n    return placement;\r\n  }\r\n\r\n  const boundaries = getBoundaries(target, host, padding, boundariesElement);\r\n\r\n  type Rects = { top: Offsets; right: Offsets; bottom: Offsets; left: Offsets };\r\n  const rects: Rects = {\r\n    top: {\r\n      width: boundaries?.width ?? 0,\r\n      height: (refRect?.top ?? 0) - (boundaries?.top ?? 0)\r\n    },\r\n    right: {\r\n      width: (boundaries?.right ?? 0) - (refRect?.right ?? 0),\r\n      height: boundaries?.height ?? 0\r\n    },\r\n    bottom: {\r\n      width: boundaries?.width ?? 0,\r\n      height: (boundaries?.bottom ?? 0) - (refRect?.bottom ?? 0)\r\n    },\r\n    left: {\r\n      width: (refRect.left ?? 0) - (boundaries?.left ?? 0),\r\n      height: boundaries?.height ?? 0\r\n    }\r\n  };\r\n\r\n  const sortedAreas = Object.keys(rects)\r\n    .map((key) => ({\r\n      position: key,\r\n      ...rects[key as keyof Rects],\r\n      area: getArea(rects[key as keyof Rects] as { width: number; height: number })\r\n    }))\r\n    .sort((a, b) => b.area - a.area);\r\n\r\n  let filteredAreas = sortedAreas.filter(({ width, height }) => {\r\n    return width >= target.clientWidth && height >= target.clientHeight;\r\n  });\r\n\r\n  filteredAreas = filteredAreas.filter(({ position }) => {\r\n    return allowedPositions.some((allowedPosition: string) => {\r\n      return allowedPosition === position;\r\n    });\r\n  });\r\n\r\n  const computedPlacement: string = filteredAreas.length > 0 ? filteredAreas[0].position : sortedAreas[0].position;\r\n\r\n  const variation = placement.split(' ')[1];\r\n  // for tooltip on auto position\r\n  target.className = target.className.replace(\r\n    /bs-tooltip-auto/g,\r\n    `bs-tooltip-${\r\n      getBsVer().isBs5 ? PlacementForBs5[computedPlacement as keyof typeof PlacementForBs5] : computedPlacement\r\n    }`\r\n  );\r\n\r\n  return computedPlacement + (variation ? `-${variation}` : '');\r\n}\r\n","import { Data, Offsets } from '../models';\r\n\r\nexport function getOffsets(data: Data): Offsets {\r\n  return {\r\n    width: data.offsets.target.width,\r\n    height: data.offsets.target.height,\r\n    left: Math.floor(data.offsets.target.left ?? 0),\r\n    top: Math.round(data.offsets.target.top ?? 0),\r\n    bottom: Math.round(data.offsets.target.bottom ?? 0),\r\n    right: Math.floor(data.offsets.target.right ?? 0)\r\n  };\r\n}\r\n","/**\r\n * Get the opposite placement of the given one\r\n */\r\nexport function getOppositePlacement(placement: string): string {\r\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\r\n\r\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched as keyof typeof hash]);\r\n}\r\n","/**\r\n * Get the opposite placement variation of the given one\r\n */\r\nexport function getOppositeVariation(variation: string) {\r\n  if (variation === 'right') {\r\n    return 'left';\r\n  } else if (variation === 'left') {\r\n    return 'right';\r\n  }\r\n\r\n  return variation;\r\n}\r\n","/**\r\n * Get the outer sizes of the given element (offset size + margins)\r\n */\r\nimport { Offsets } from '../models';\r\n\r\nconst parse = (value?: string, def = 0) => value ? parseFloat(value) : def;\r\nexport function getOuterSizes(element: HTMLElement): Offsets {\r\n  const window = element.ownerDocument.defaultView;\r\n  const styles = window?.getComputedStyle(element);\r\n  const x = parse(styles?.marginTop) + parse(styles?.marginBottom);\r\n  const y = parse(styles?.marginLeft) + parse(styles?.marginRight);\r\n\r\n  return {\r\n    width: Number(element.offsetWidth) + y,\r\n    height: Number(element.offsetHeight) + x\r\n  };\r\n}\r\n","/**\r\n * Get offsets to the reference element\r\n */\r\nimport { findCommonOffsetParent } from './findCommonOffsetParent';\r\nimport { getOffsetRectRelativeToArbitraryNode } from './getOffsetRectRelativeToArbitraryNode';\r\nimport { getFixedPositionOffsetParent } from './getFixedPositionOffsetParent';\r\nimport { Offsets } from '../models';\r\n\r\nexport function getReferenceOffsets(\r\n  target: HTMLElement,\r\n  host: HTMLElement,\r\n  fixedPosition?: boolean\r\n): Offsets {\r\n  const commonOffsetParent = fixedPosition\r\n    ? getFixedPositionOffsetParent(target)\r\n    : findCommonOffsetParent(target, host);\r\n\r\n  return getOffsetRectRelativeToArbitraryNode(host, commonOffsetParent, fixedPosition);\r\n}\r\n","/**\r\n * Get offsets to the target\r\n */\r\nimport { getOppositePlacement } from './getOppositePlacement';\r\nimport { getOuterSizes } from './getOuterSizes';\r\nimport { Offsets } from '../models';\r\n\r\n\r\nexport function getTargetOffsets(\r\n  target: HTMLElement,\r\n  hostOffsets: Offsets,\r\n  position: string\r\n): Offsets {\r\n  const placement = position.split(' ')[0];\r\n  // Get target node sizes\r\n  const targetRect = getOuterSizes(target);\r\n\r\n  // Add position, width and height to our offsets object\r\n  const targetOffsets = {\r\n    width: targetRect.width,\r\n    height: targetRect.height\r\n  };\r\n\r\n  // depending by the target placement we have to compute its offsets slightly differently\r\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\r\n  const mainSide = isHoriz ? 'top' : 'left';\r\n  const secondarySide = isHoriz ? 'left' : 'top';\r\n  const measurement = isHoriz ? 'height' : 'width';\r\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\r\n\r\n  targetOffsets[mainSide as keyof typeof targetOffsets] =\r\n    (hostOffsets[mainSide] ?? 0) +\r\n    hostOffsets[measurement] / 2 -\r\n    targetRect[measurement] / 2;\r\n\r\n  targetOffsets[secondarySide as keyof typeof targetOffsets] = placement === secondarySide\r\n    ? (hostOffsets[secondarySide] ?? 0)- targetRect[secondaryMeasurement]\r\n    : hostOffsets[getOppositePlacement(secondarySide) as keyof typeof hostOffsets] ?? 0;\r\n\r\n  return targetOffsets;\r\n}\r\n","/**\r\n * Helper used to know if the given modifier is enabled.\r\n */\r\nimport { Options } from '../models';\r\n\r\nexport function isModifierEnabled(options: Options, modifierName: string): boolean {\r\n  return !!options.modifiers[modifierName as keyof typeof options.modifiers]?.enabled;\r\n}\r\n","import { getBsVer } from 'ngx-bootstrap/utils';\r\nimport { AvailbleBSPositions } from '../models';\r\n\r\nconst availablePositions = {\r\n  top: ['top', 'top start', 'top end'],\r\n  bottom: ['bottom', 'bottom start', 'bottom end'],\r\n  start: ['start', 'start top', 'start bottom'],\r\n  end: ['end', 'end top', 'end bottom']\r\n};\r\n\r\nexport function checkPopoverMargin(placement: AvailbleBSPositions, checkPosition: 'top' | 'bottom' | 'start' | 'end'): boolean {\r\n  if (!getBsVer().isBs5) {\r\n    return false;\r\n  }\r\n\r\n  return availablePositions[checkPosition].includes(placement);\r\n}\r\n\r\nexport function checkMargins(placement: any): string {\r\n  if (!getBsVer().isBs5) {\r\n    return '';\r\n  }\r\n\r\n  if (checkPopoverMargin(placement, 'end')) {\r\n    return 'ms-2';\r\n  }\r\n\r\n  if (checkPopoverMargin(placement, 'start')) {\r\n    return 'me-2';\r\n  }\r\n\r\n  if (checkPopoverMargin(placement, 'top')) {\r\n    return 'mb-2';\r\n  }\r\n\r\n  if (checkPopoverMargin(placement, 'bottom')) {\r\n    return 'mt-2';\r\n  }\r\n\r\n  return '';\r\n}\r\n","/**\r\n * Update class for the given popper\r\n */\r\nimport { Renderer2 } from '@angular/core';\r\nimport { Data, PlacementForBs5 } from '../models';\r\nimport { checkMargins } from './checkMargin';\r\nimport { getBsVer } from 'ngx-bootstrap/utils';\r\n\r\nexport function updateContainerClass(data: Data, renderer?: Renderer2): void {\r\n  const target = data.instance.target;\r\n\r\n  let containerClass = target.className;\r\n\r\n  const dataPlacement = getBsVer().isBs5 ? PlacementForBs5[data.placement as keyof typeof PlacementForBs5] : data.placement;\r\n  if (data.placementAuto) {\r\n    containerClass = containerClass.replace(/bs-popover-auto/g, `bs-popover-${dataPlacement}`);\r\n    containerClass = containerClass.replace(/ms-2|me-2|mb-2|mt-2/g, '');\r\n    containerClass = containerClass.replace(/bs-tooltip-auto/g, `bs-tooltip-${dataPlacement}`);\r\n    containerClass = containerClass.replace(/\\sauto/g, ` ${dataPlacement}`);\r\n\r\n    if (containerClass.indexOf('popover') !== -1) {\r\n      containerClass = containerClass + ' ' + checkMargins(dataPlacement);\r\n    }\r\n\r\n    if (containerClass.indexOf('popover') !== -1 && containerClass.indexOf('popover-auto') === -1) {\r\n      containerClass += ' popover-auto';\r\n    }\r\n\r\n    if (containerClass.indexOf('tooltip') !== -1  && containerClass.indexOf('tooltip-auto') === -1) {\r\n      containerClass += ' tooltip-auto';\r\n    }\r\n  }\r\n  containerClass = containerClass.replace(/left|right|top|bottom|end|start/g, `${dataPlacement.split(' ')[0]}`);\r\n\r\n  if (renderer) {\r\n    renderer.setAttribute(target, 'class', containerClass);\r\n\r\n    return;\r\n  }\r\n\r\n  target.className = containerClass;\r\n}\r\n","/**\r\n * Set the style to the given popper\r\n */\r\nimport { Renderer2 } from '@angular/core';\r\n\r\nimport { isNumeric } from './isNumeric';\r\n\r\nexport function setStyles(element: HTMLElement | null, styles?: Record<string, string|number|HTMLElement>, renderer?: Renderer2) {\r\n  if (!element || !styles) {\r\n    return;\r\n  }\r\n  Object.keys(styles).forEach((prop) => {\r\n    let unit = '';\r\n    // add unit if the value is numeric and is one of the following\r\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 &&\r\n      isNumeric(styles[prop] as string)) {\r\n      unit = 'px';\r\n    }\r\n\r\n    if (renderer) {\r\n      renderer.setStyle(element, prop, `${String(styles[prop])}${unit}`);\r\n\r\n      return;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    (element.style as any)[prop] = String(styles[prop]) + unit;\r\n  });\r\n}\r\n","import { getClientRect, getOuterSizes, getStyleComputedProperty } from '../utils';\r\nimport { Data } from '../models';\r\n\r\nexport function arrow(data: Data) {\r\n  let targetOffsets = data.offsets.target;\r\n  // if arrowElement is a string, suppose it's a CSS selector\r\n  const arrowElement: HTMLElement | null = data.instance.target.querySelector('.arrow');\r\n\r\n  // if arrowElement is not found, don't run the modifier\r\n  if (!arrowElement) {\r\n    return data;\r\n  }\r\n\r\n  const isVertical = ['left', 'right'].indexOf(data.placement.split(' ')[0]) !== -1;\r\n\r\n  const len = isVertical ? 'height' : 'width';\r\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\r\n  const side = sideCapitalized.toLowerCase() as keyof typeof targetOffsets;\r\n  const altSide = isVertical ? 'left' : 'top';\r\n  const opSide = isVertical ? 'bottom' : 'right';\r\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\r\n  const placementVariation = data.placement.split(' ')[1];\r\n\r\n  // top/left side\r\n  if ((data.offsets.host[opSide] ?? 0) - arrowElementSize < (targetOffsets[side] ?? 0)) {\r\n    (targetOffsets)[side] -=\r\n      (targetOffsets[side] ?? 0) - ((data.offsets.host[opSide] ?? 0) - arrowElementSize);\r\n  }\r\n  // bottom/right side\r\n  if (Number((data).offsets.host[side]) + Number(arrowElementSize) > (targetOffsets[opSide] ?? 0)) {\r\n    (targetOffsets)[side] +=\r\n      Number((data).offsets.host[side]) + Number(arrowElementSize) - Number((targetOffsets)[opSide]);\r\n  }\r\n  targetOffsets = getClientRect(targetOffsets);\r\n\r\n  // Compute the sideValue using the updated target offsets\r\n  // take target margin in account because we don't have this info available\r\n  const css = getStyleComputedProperty(data.instance.target) as unknown as Record<string, string>;\r\n  const targetMarginSide = parseFloat(css[`margin${sideCapitalized}`]) || 0;\r\n  const targetBorderSide = parseFloat(css[`border${sideCapitalized}Width`]) || 0;\r\n\r\n  // compute center of the target\r\n  let center: number;\r\n  if (!placementVariation) {\r\n    center = Number((data).offsets.host[side]) + Number(data.offsets.host[len] / 2 - arrowElementSize / 2);\r\n  } else {\r\n    const targetBorderRadius = parseFloat(css[\"borderRadius\"]) || 0;\r\n    const targetSideArrowOffset = Number(targetMarginSide + targetBorderSide + targetBorderRadius);\r\n    center = side === placementVariation ?\r\n      Number((data).offsets.host[side]) + targetSideArrowOffset :\r\n      Number((data).offsets.host[side]) + Number(data.offsets.host[len] - targetSideArrowOffset);\r\n  }\r\n\r\n  let sideValue =\r\n    center - (targetOffsets[side] ?? 0) - targetMarginSide - targetBorderSide;\r\n\r\n  // prevent arrowElement from being placed not contiguously to its target\r\n  sideValue = Math.max(Math.min(targetOffsets[len] - (arrowElementSize + 5), sideValue), 0);\r\n  data.offsets.arrow = {\r\n    [side]: Math.round(sideValue),\r\n    [altSide]: '' // make sure to unset any eventual altSide value from the DOM node\r\n  };\r\n\r\n  data.instance.arrow = arrowElement;\r\n\r\n  return data;\r\n}\r\n","import { Data } from '../models';\r\nimport {\r\n  computeAutoPlacement,\r\n  getBoundaries,\r\n  getClientRect,\r\n  getOppositeVariation,\r\n  getTargetOffsets,\r\n  isModifierEnabled\r\n} from '../utils';\r\n\r\nexport function flip(data: Data): Data {\r\n  data.offsets.target = getClientRect(data.offsets.target);\r\n\r\n  if (!isModifierEnabled(data.options, 'flip')) {\r\n\r\n    data.offsets.target = {\r\n      ...data.offsets.target,\r\n      ...getTargetOffsets(\r\n        data.instance.target,\r\n        data.offsets.host,\r\n        data.placement\r\n      )\r\n    };\r\n\r\n    return data;\r\n  }\r\n\r\n  const boundaries = getBoundaries(\r\n    data.instance.target,\r\n    data.instance.host,\r\n    0, // padding\r\n    'viewport',\r\n    false // positionFixed\r\n  );\r\n\r\n  let placement = data.placement.split(' ')[0];\r\n  let variation = data.placement.split(' ')[1] || '';\r\n\r\n  const offsetsHost = data.offsets.host;\r\n  const target = data.instance.target;\r\n  const host = data.instance.host;\r\n\r\n  const adaptivePosition = computeAutoPlacement('auto', offsetsHost, target, host, data.options.allowedPositions);\r\n  const flipOrder = [placement, adaptivePosition];\r\n\r\n  flipOrder.forEach((step, index) => {\r\n    if (placement !== step || flipOrder.length === index + 1) {\r\n      return;\r\n    }\r\n\r\n    placement = data.placement.split(' ')[0];\r\n\r\n    // using floor because the host offsets may contain decimals we are not going to consider here\r\n    const overlapsRef =\r\n      (placement === 'left' &&\r\n        Math.floor(data.offsets.target.right ?? 0) > Math.floor(data.offsets.host.left ?? 0)) ||\r\n      (placement === 'right' &&\r\n        Math.floor(data.offsets.target.left ?? 0) < Math.floor(data.offsets.host.right ?? 0)) ||\r\n      (placement === 'top' &&\r\n        Math.floor(data.offsets.target.bottom ?? 0) > Math.floor(data.offsets.host.top ?? 0)) ||\r\n      (placement === 'bottom' &&\r\n        Math.floor(data.offsets.target.top ?? 0) < Math.floor(data.offsets.host.bottom ?? 0));\r\n\r\n    const overflowsLeft = Math.floor(data.offsets.target.left ?? 0) < Math.floor(boundaries.left ?? 0);\r\n    const overflowsRight = Math.floor(data.offsets.target.right ?? 0) > Math.floor(boundaries.right ?? 0);\r\n    const overflowsTop = Math.floor(data.offsets.target.top ?? 0) < Math.floor(boundaries.top ?? 0);\r\n    const overflowsBottom = Math.floor(data.offsets.target.bottom ?? 0) > Math.floor(boundaries.bottom ?? 0);\r\n\r\n    const overflowsBoundaries =\r\n      (placement === 'left' && overflowsLeft) ||\r\n      (placement === 'right' && overflowsRight) ||\r\n      (placement === 'top' && overflowsTop) ||\r\n      (placement === 'bottom' && overflowsBottom);\r\n\r\n    // flip the variation if required\r\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\r\n    const flippedVariation =\r\n      ((isVertical && variation === 'left' && overflowsLeft) ||\r\n        (isVertical && variation === 'right' && overflowsRight) ||\r\n        (!isVertical && variation === 'left' && overflowsTop) ||\r\n        (!isVertical && variation === 'right' && overflowsBottom));\r\n\r\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\r\n      if (overlapsRef || overflowsBoundaries) {\r\n        placement = flipOrder[index + 1];\r\n      }\r\n\r\n      if (flippedVariation) {\r\n        variation = getOppositeVariation(variation);\r\n      }\r\n\r\n      data.placement = placement + (variation ? ` ${variation}` : '');\r\n\r\n      data.offsets.target = {\r\n        ...data.offsets.target,\r\n        ...getTargetOffsets(\r\n          data.instance.target,\r\n          data.offsets.host,\r\n          data.placement\r\n        )\r\n      };\r\n    }\r\n  });\r\n\r\n  return data;\r\n}\r\n","import {\r\n  computeAutoPlacement,\r\n  getReferenceOffsets,\r\n  getTargetOffsets\r\n} from '../utils';\r\n\r\nimport { Data, Options } from '../models';\r\n\r\nexport function initData(\r\n  targetElement: HTMLElement|null, hostElement: HTMLElement|null, position: string, options?: Options\r\n): Data|undefined {\r\n\r\n  if (!targetElement || !hostElement) {\r\n    return ;\r\n  }\r\n\r\n  const hostElPosition = getReferenceOffsets(targetElement, hostElement);\r\n\r\n  if (!position.match(/^(auto)*\\s*(left|right|top|bottom|start|end)*$/)\r\n    && !position.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)) {\r\n            position = 'auto';\r\n    }\r\n\r\n  const placementAuto = !!position.match(/auto/g);\r\n\r\n  // support old placements 'auto left|right|top|bottom'\r\n  let placement = position.match(/auto\\s(left|right|top|bottom|start|end)/)\r\n    ? position.split(' ')[1] || 'auto'\r\n    : position;\r\n\r\n  // Normalize placements that have identical main placement and variation (\"right right\" => \"right\").\r\n  const matches = placement.match(/^(left|right|top|bottom|start|end)* ?(?!\\1)(left|right|top|bottom|start|end)?/);\r\n  if (matches) {\r\n    placement = matches[1] + (matches[2] ? ` ${matches[2]}` : '');\r\n  }\r\n\r\n  // \"left right\", \"top bottom\" etc. placements also considered incorrect.\r\n  if (['left right', 'right left', 'top bottom', 'bottom top'].indexOf(placement) !== -1) {\r\n    placement = 'auto';\r\n  }\r\n\r\n  placement = computeAutoPlacement(\r\n    placement,\r\n    hostElPosition,\r\n    targetElement,\r\n    hostElement,\r\n    options ? options.allowedPositions : undefined\r\n  );\r\n\r\n  const targetOffset = getTargetOffsets(targetElement, hostElPosition, placement);\r\n\r\n  return {\r\n    options: options || {modifiers: {}},\r\n    instance: {\r\n      target: targetElement,\r\n      host: hostElement,\r\n      arrow: void 0\r\n    },\r\n    offsets: {\r\n      target: targetOffset,\r\n      host: hostElPosition,\r\n      arrow: void 0\r\n    },\r\n    positionFixed: false,\r\n    placement,\r\n    placementAuto\r\n  };\r\n}\r\n","import { getBoundaries, isModifierEnabled } from '../utils';\r\nimport { Data, Offsets } from '../models';\r\n\r\nexport function preventOverflow(data: Data) {\r\n  if (!isModifierEnabled(data.options, 'preventOverflow')) {\r\n    return data;\r\n  }\r\n\r\n  // NOTE: DOM access here\r\n  // resets the target Offsets's position so that the document size can be calculated excluding\r\n  // the size of the targetOffsets element itself\r\n  const transformProp = 'transform';\r\n  const targetStyles = data.instance.target.style; // assignment to help minification\r\n  const { top, left, [transformProp]: transform } = targetStyles;\r\n  targetStyles.top = '';\r\n  targetStyles.left = '';\r\n  targetStyles[transformProp] = '';\r\n\r\n  const boundaries = getBoundaries(\r\n    data.instance.target,\r\n    data.instance.host,\r\n    0, // padding\r\n    data.options.modifiers.preventOverflow?.boundariesElement || 'scrollParent',\r\n    false // positionFixed\r\n  );\r\n\r\n  // NOTE: DOM access here\r\n  // restores the original style properties after the offsets have been computed\r\n  targetStyles.top = top;\r\n  targetStyles.left = left;\r\n  targetStyles[transformProp] = transform;\r\n\r\n  const order = ['left', 'right', 'top', 'bottom'];\r\n\r\n  const check = {\r\n    primary(placement: keyof Offsets) {\r\n      let value = data.offsets.target[placement];\r\n      // options.escapeWithReference\r\n      if ((data.offsets.target[placement] ?? 0) < (boundaries[placement] ?? 0)) {\r\n        value = Math.max(data.offsets.target[placement] ?? 0, boundaries[placement] ?? 0);\r\n      }\r\n\r\n      return { [placement]: value };\r\n    },\r\n    secondary(placement: keyof Offsets) {\r\n      const isPlacementHorizontal = placement === 'right';\r\n      const mainSide = isPlacementHorizontal ? 'left' : 'top';\r\n      const measurement = isPlacementHorizontal ? 'width' : 'height';\r\n      let value = data.offsets.target[mainSide];\r\n\r\n      // escapeWithReference\r\n      if ((data.offsets.target[placement] ?? 0) > (boundaries[placement] ?? 0)) {\r\n        value = Math.min(\r\n          data.offsets.target[mainSide] ?? 0,\r\n          (boundaries[placement] ?? 0) - data.offsets.target[measurement]\r\n        );\r\n      }\r\n\r\n      return { [mainSide]: value };\r\n    }\r\n  };\r\n\r\n  order.forEach((placement) => {\r\n    const side = ['left', 'top', 'start'].indexOf(placement) !== -1 ? check['primary'] : check['secondary'];\r\n\r\n    data.offsets.target = {\r\n      ...data.offsets.target,\r\n      ...side(placement as keyof Offsets)\r\n    };\r\n  });\r\n\r\n  return data;\r\n}\r\n","import { Data } from '../models';\r\n\r\nexport function shift(data: Data): Data {\r\n  const placement = data.placement;\r\n  const basePlacement = placement.split(' ')[0];\r\n  const shiftVariation = placement.split(' ')[1];\r\n\r\n  if (shiftVariation) {\r\n    const { host, target } = data.offsets;\r\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\r\n    const side = isVertical ? 'left' : 'top';\r\n    const measurement = isVertical ? 'width' : 'height';\r\n\r\n    const shiftOffsets = {\r\n      start: { [side]: host[side] },\r\n      end: {\r\n        [side]: (host[side] ?? 0) + host[measurement] - target[measurement]\r\n      }\r\n    };\r\n\r\n    data.offsets.target = {\r\n      ...target, ...{\r\n        [side]: (side === shiftVariation ? shiftOffsets.start[side] : shiftOffsets.end[side])\r\n      }\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n","/**\r\n * @copyright Valor Software\r\n * @copyright Federico Zivolo and contributors\r\n */\r\nimport { Renderer2 } from '@angular/core';\r\nimport { Data, Offsets, Options, MapPlacementInToRL } from './models';\r\n\r\nimport { arrow, flip, initData, preventOverflow, shift } from './modifiers';\r\n\r\nimport { getOffsets, getReferenceOffsets, setStyles, updateContainerClass } from './utils';\r\n\r\n\r\nexport class Positioning {\r\n  position(hostElement: HTMLElement, targetElement: HTMLElement/*, round = true*/): Offsets | undefined {\r\n    return this.offset(hostElement, targetElement/*, false*/);\r\n  }\r\n\r\n  offset(hostElement: HTMLElement, targetElement: HTMLElement/*, round = true*/): Offsets | undefined {\r\n    return getReferenceOffsets(targetElement, hostElement);\r\n  }\r\n\r\n  positionElements(\r\n    hostElement: HTMLElement | null,\r\n    targetElement: HTMLElement | null,\r\n    position: string,\r\n    appendToBody?: boolean,\r\n    options?: Options\r\n  ): Data | undefined {\r\n    const chainOfModifiers = [flip, shift, preventOverflow, arrow];\r\n    const _position = MapPlacementInToRL[position as keyof typeof MapPlacementInToRL];\r\n    const data = initData(targetElement, hostElement, _position, options);\r\n    if (!data) {\r\n      return;\r\n    }\r\n\r\n    return chainOfModifiers.reduce(\r\n      (modifiedData, modifier) => modifier(modifiedData),\r\n      data\r\n    );\r\n  }\r\n}\r\n\r\nconst positionService = new Positioning();\r\n\r\nexport function positionElements(\r\n  hostElement: HTMLElement | null,\r\n  targetElement: HTMLElement | null,\r\n  placement: string,\r\n  appendToBody?: boolean,\r\n  options?: Options,\r\n  renderer?: Renderer2\r\n): void {\r\n\r\n  const data = positionService.positionElements(\r\n    hostElement,\r\n    targetElement,\r\n    placement,\r\n    appendToBody,\r\n    options\r\n  );\r\n\r\n  if (!data) {\r\n    return;\r\n  }\r\n\r\n  const offsets = getOffsets(data);\r\n\r\n  setStyles(targetElement, {\r\n    'will-change': 'transform',\r\n    top: '0px',\r\n    left: '0px',\r\n    transform: `translate3d(${offsets.left}px, ${offsets.top}px, 0px)`\r\n  }, renderer);\r\n\r\n  if (data.instance.arrow) {\r\n    setStyles(data.instance.arrow, data.offsets.arrow, renderer);\r\n  }\r\n\r\n  updateContainerClass(data, renderer);\r\n}\r\n","import { Injectable, ElementRef, RendererFactory2, Inject, PLATFORM_ID, NgZone } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\nimport { positionElements } from './ng-positioning';\r\n\r\nimport { fromEvent, merge, of, animationFrameScheduler, Subject, Observable } from 'rxjs';\r\nimport { Options } from './models';\r\n\r\n\r\nexport interface PositioningOptions {\r\n  /** The DOM element, ElementRef, or a selector string of an element which will be moved */\r\n  element?: HTMLElement | ElementRef | string;\r\n\r\n  /** The DOM element, ElementRef, or a selector string of an element which the element will be attached to  */\r\n  target?: HTMLElement | ElementRef | string;\r\n\r\n  /**\r\n   * A string of the form 'vert-attachment horiz-attachment' or 'placement'\r\n   * - placement can be \"top\", \"bottom\", \"left\", \"right\"\r\n   * not yet supported:\r\n   * - vert-attachment can be any of 'top', 'middle', 'bottom'\r\n   * - horiz-attachment can be any of 'left', 'center', 'right'\r\n   */\r\n  attachment?: string;\r\n\r\n  /** A string similar to `attachment`. The one difference is that, if it's not provided,\r\n   * `targetAttachment` will assume the mirror image of `attachment`.\r\n   */\r\n  targetAttachment?: string;\r\n\r\n  /** A string of the form 'vert-offset horiz-offset'\r\n   * - vert-offset and horiz-offset can be of the form \"20px\" or \"55%\"\r\n   */\r\n  offset?: string;\r\n\r\n  /** A string similar to `offset`, but referring to the offset of the target */\r\n  targetOffset?: string;\r\n\r\n  /** If true component will be attached to body */\r\n  appendToBody?: boolean;\r\n}\r\n\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class PositioningService {\r\n  private options?: Options;\r\n  private update$$ = new Subject<null>();\r\n  private positionElements = new Map();\r\n  private triggerEvent$?: Observable<number|Event|null>;\r\n  private isDisabled = false;\r\n\r\n  constructor(\r\n    ngZone: NgZone,\r\n    rendererFactory: RendererFactory2,\r\n    @Inject(PLATFORM_ID) platformId: number\r\n  ) {\r\n\r\n    if (isPlatformBrowser(platformId)) {\r\n      ngZone.runOutsideAngular(() => {\r\n        this.triggerEvent$ = merge(\r\n          fromEvent(window, 'scroll', { passive: true }),\r\n          fromEvent(window, 'resize', { passive: true }),\r\n                    of(0, animationFrameScheduler),\r\n          this.update$$\r\n        );\r\n\r\n        this.triggerEvent$.subscribe(() => {\r\n          if (this.isDisabled) {\r\n            return;\r\n          }\r\n\r\n          this.positionElements\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            .forEach((positionElement: any) => {\r\n              positionElements(\r\n                _getHtmlElement(positionElement.target),\r\n                _getHtmlElement(positionElement.element),\r\n                positionElement.attachment,\r\n                positionElement.appendToBody,\r\n                this.options,\r\n                rendererFactory.createRenderer(null, null)\r\n              );\r\n            });\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  position(options: PositioningOptions): void {\r\n    this.addPositionElement(options);\r\n  }\r\n\r\n  get event$(): Observable<number|Event|null>|undefined {\r\n    return this.triggerEvent$;\r\n  }\r\n\r\n  disable(): void {\r\n    this.isDisabled = true;\r\n  }\r\n\r\n  enable(): void {\r\n    this.isDisabled = false;\r\n  }\r\n\r\n  addPositionElement(options: PositioningOptions): void {\r\n    this.positionElements.set(_getHtmlElement(options.element), options);\r\n  }\r\n\r\n  calcPosition(): void {\r\n    this.update$$.next(null);\r\n  }\r\n\r\n  deletePositionElement(elRef: ElementRef): void {\r\n    this.positionElements.delete(_getHtmlElement(elRef));\r\n  }\r\n\r\n  setOptions(options: Options) {\r\n    this.options = options;\r\n  }\r\n}\r\n\r\nfunction _getHtmlElement(element?: HTMLElement | ElementRef | string): HTMLElement | null {\r\n  // it means that we got a selector\r\n  if (typeof element === 'string') {\r\n    return document.querySelector(element);\r\n  }\r\n\r\n  if (element instanceof ElementRef) {\r\n    return element.nativeElement;\r\n  }\r\n\r\n  return element ?? null;\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}